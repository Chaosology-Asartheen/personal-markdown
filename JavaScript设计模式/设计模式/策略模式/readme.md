# 策略模式
### 什么是策略模式
> 定义: 定义一系列的算法，把它们一个个封装起来，并且使它们可以相互替换。
> 将不变的部分和变化的部分隔开是每个设计模式的主题，策略模式也不例外，策略模式的目的就是将算法的使用与算法的实现分离开来。

一个基于策略模式的程序至少由两部分组成。第一个部分是一组策略类，策略类封装了具体的算法，并负责具体的计算过程。第二个部分是环境类 Context，Context 接受客户的请求，随后把请求委托给某一个策略类。要做到这点，说明 Context 中要维持对某个策略对象的引用。

### 多态在策略模式中的体现
通过使用策略模式重构代码，我们消除了原程序中大片的条件分支语句。所有跟计算奖金有
关的逻辑不再放在 Context 中，而是分布在各个策略对象中。Context 并没有计算奖金的能力，而
是把这个职责委托给了某个策略对象。每个策略对象负责的算法已被各自封装在对象内部。当我
们对这些策略对象发出“计算奖金”的请求时，它们会返回各自不同的计算结果，这正是对象多
态性的体现，也是“它们可以相互替换”的目的。替换 Context 中当前保存的策略对象，便能执
行不同的算法来得到我们想要的结果。

### 策略模式的优缺点

#### 优点

- 策略模式利用组合、委托和多态等技术和思想，可以有效地避免多重条件选择语句。

- 策略模式提供了对开放—封闭原则的完美支持，将算法封装在独立的 strategy 中，使得它

们易于切换，易于理解，易于扩展。

- 策略模式中的算法也可以复用在系统的其他地方，从而避免许多重复的复制粘贴工作。

- 在策略模式中利用组合和委托来让 Context 拥有执行算法的能力，这也是继承的一种更轻

便的替代方案。

#### 缺点

当然，策略模式也有一些缺点，但这些缺点并不严重。

- 首先，使用策略模式会在程序中增加许多策略类或者策略对象，但实际上这比把它们负责的

逻辑堆砌在 Context 中要好。

- 其次，要使用策略模式，必须了解所有的 strategy，必须了解各个 strategy 之间的不同点，

这样才能选择一个合适的 strategy。比如，我们要选择一种合适的旅游出行路线，必须先了解选

择飞机、火车、自行车等方案的细节。此时 strategy 要向客户暴露它的所有实现，这是违反最少

知识原则的。 



### 总结

> **在以类为中心的传统面向对象语言中，不同的算法或者行为被封装在各个策略类**
>
> **中，Context 将请求委托给这些策略对象，这些策略对象会根据请求返回不同的执行结果，这样**
>
> **便能表现出对象的多态性。**
>
> Peter Norvig 在他的演讲中曾说过：“在函数作为一等对象的语言中，策略模式是隐形的。
>
> strategy 就是值为函数的变量。”在 JavaScript 中，除了使用类来封装算法和行为之外，使用函数
>
> 当然也是一种选择。这些“算法”可以被封装到函数中并且四处传递，也就是我们常说的“高阶
>
> 函数”。实际上在 JavaScript 这种将函数作为一等对象的语言里，策略模式已经融入到了语言本身
>
> 当中，我们经常用高阶函数来封装不同的行为，并且把它传递到另一个函数中。**当我们对这些函**
>
> **数发出“调用”的消息时，不同的函数会返回不同的执行结果。在 JavaScript 中，“函数对象的多**
>
> **态性”来得更加简单。** 
>
> 在 JavaScript 语言的策略模式中，**策略类往往被函数所代替**，这时策略模式就
>
> 成为一种“隐形”的模式。尽管这样，从头到尾地了解策略模式，不仅可以让我们对该模式有更
>
> 加透彻的了解，也可以使我们明白使用函数的好处。