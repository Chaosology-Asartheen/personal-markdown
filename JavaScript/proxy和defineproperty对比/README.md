# defineproperty和proxy对比总结

- defineproperty
    - 无法动态拦截属性, 并且需要静态注册属性
    - 监听不到数组下表的变化
    - 监听不到对象新增属性的变化
    - 监听对象的属性 需要深度监听 并且监听的对象必须提前声明
    - 监听数组可以通过改写原生的方法去监听 并触发相应的函数方法
- proxy
    - 可以动态拦截属性, 但是也会拦截我们不需要拦截的属性
        - 比如我只想拦截slice,但是length,constructor这种你不需要响应的属性也响应了.这样程序就有了额外的负担.
    - 可以监听到数组的新增 删除 ... 
    - 可以监听到对象的新增 修改 ...
    - 在`setter`中 需要返回值 `return value = newValue`, 否则修改数组时会报错, 因为proxy会监听所有的属性包括数组的下标和length属性
    - Proxy 的兼容性不好, 可以参考[文章](https://juejin.cn/post/6907925026532491278)