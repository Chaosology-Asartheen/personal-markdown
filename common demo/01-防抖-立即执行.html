<!--
 * @Author: shmao
 * @Date: 2020-09-20 12:14:31
 * @LastEditors: shmao
 * @LastEditTime: 2020-09-20 16:38:28
-->
<script>

    function debounceImme(func, timeout = 1000,) {
        let timer;
        return function (...args) {
            let context = this;
            if (timer) clearTimeout(timer);

            let callNow = !timer;

            timer = setTimeout(() => {
                timer = null;
            }, timeout);

            if (callNow) return func.apply(context, args);
        }
    }

    const task = () => {
        console.log('run task');
    }
    const debounceTask = debounceImme(task, 1000);

    window.addEventListener('click', debounceTask)

</script>